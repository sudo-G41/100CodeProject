# 백준[11660](https://www.acmicpc.net/problem/11660)번
## 문제
N×N개의 수가 N×N 크기의 표에 채워져 있다. (x1, y1)부터 (x2, y2)까지 합을 구하는 프로그램을 작성하시오. (x, y)는 x행 y열을 의미한다.  
예를 들어, N = 4이고, 표가 아래와 같이 채워져 있는 경우를 살펴보자.  
|1|2|3|4|
|-|-|-|-|
|2|3|4|5|
|3|4|5|6|
|4|5|6|7|

여기서 (2, 2)부터 (3, 4)까지 합을 구하면 3+4+5+4+5+6 = 27이고, (4, 4)부터 (4, 4)까지 합을 구하면 7이다.  
표에 채워져 있는 수와 합을 구하는 연산이 주어졌을 때, 이를 처리하는 프로그램을 작성하시오.  

## 입력
첫째 줄에 표의 크기 N과 합을 구해야 하는 횟수 M이 주어진다. (1 ≤ N ≤ 1024, 1 ≤ M ≤ 100,000) 둘째 줄부터 N개의 줄에는 표에 채워져 있는 수가 1행부터 차례대로 주어진다. 다음 M개의 줄에는 네 개의 정수 x1, y1, x2, y2 가 주어지며, (x1, y1)부터 (x2, y2)의 합을 구해 출력해야 한다. 표에 채워져 있는 수는 1,000보다 작거나 같은 자연수이다. (x1 ≤ x2, y1 ≤ y2)

## 출력
총 M줄에 걸쳐 (x1, y1)부터 (x2, y2)까지 합을 구해 출력한다.

## 내 풀이
우선 [0:1, 1:3, 2:3, 3:2, 4:6, 5:7, 6:2, 7:9, 8:5, 9:1] index:value인 배열이 있다고 가정해보자.  
7번 index이하의 값들을 전부 더한다고 하면 (0번+1번+2번+3번+...+6번+7번)이고 ... (가)
3번 index미만의 값들을 전부 더한다고 하면 (0번+1번+2번)일것이다. .............. (나)
이때 (가)-(나)를 하게되면 (0번+1번+2번+3번+...+6번+7번)-(0번+1번+2번) 여기서 뺄셈의 교환법칙등 규칙을 적용해보면 0번+1번+2번+3번+...+6번+7번-0번-1번-2번 = 0번-0번+1번-1번+2번-2번+3번+...+6번+7번 = 0+0+0+3번+...+6번+7번이 될 것이고 이는 index 3번부터 7번까지의 합이 될 것이다.  
위와 같이 `0~n번의 합 - 0~m번의 합 = n~m번`의 합이 될 것이다.(단 n>=m)  
이 점을 이용하게 된다면 O(n-m)가 필요한 것이 O(1)로 속도를 올릴 수 있다.  
위와 같은 점을 사용하기 위해 입력시 그냥 배열에 저장하는 것이 아닌 자신의 앞에 입력된 수를 더한 값을 입력하는 것으로 배열을 0번부터 자신까지 더한 값을 저장하여 추후 해당 구간의 값을 구할 때 빠르게 구할 수 있다.

## 구현([전체 코드 파일](/baekjoon/11660/c.c))
``` c
#include <stdio.h>
#include <stdlib.h>
int main(void) {
    int** arr;
    int n,m,x1,x2,y1,y2,qwer;
    scanf("%d%d",&n,&m);
    arr = (int**)malloc(n*sizeof(int*));
    for(int i=0;i<n;i++)
        arr[i]=(int*)malloc(n*sizeof(int));
    for(int i=0;i<n;i++){
        x1=0;
        for(int j=0;j<n;j++){
            scanf("%d",&arr[i][j]);
            x1=arr[i][j]+=x1;
        }
    }
    for(int i=0;i<m;i++){
        scanf("%d%d%d%d",&x1,&y1,&x2,&y2);
        qwer=0;
        for(int j=x1-1;j<x2;j++){
            qwer+=arr[j][y2-1];
            if(y1>1){
              qwer-=arr[j][y1-2];
            }
        }
        printf("%d\n",qwer);
    }
	return 0;
}
```

## 잡담
이런거 풀고 다른 사람들은 어떻게 풀었을까 뭔가 더 신박한 방법이 있나 구경도 다니도 찾아보기도 하는데(이번 문제는 O(N*M)느낌으로 풀었는데 뭔가 O(M)으로 풀 수 있지 않을까 하는 일말의 희망을 가지고 찾아봤는데 내 검색능력 부족인지 안나왔다...) 이런 배열을 써야 하는 문제를 보면 c에서 전역 변수를 쓰는것을 자주 보는데 배울때 저거 쓰면 혼나서 맨날 불편하다.. 이런 짧고 간단한건 문제 될 것이 없는데... 그리고 다들 동적 배열 안쓰고 주어진 범위가 있으니 정적 배열 쓰는데 뭐... 나도 배열 크기 제한 안 두었으니.... 그래도 이래저래 불편한 기분이다...
솔직히 다 상관 없는건데.... 상관없는건데!!
